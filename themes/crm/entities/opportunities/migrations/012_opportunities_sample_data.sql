-- ============================================================================
-- Sample data for opportunities table - CRM Theme
-- Aligned with schema in 001_opportunities_table.sql
-- Uses users from 999_theme_sample_data.sql
-- References companies, contacts, and pipelines from their sample data
-- NOTE: expectedRevenue is a GENERATED column - DO NOT insert it!
-- ============================================================================

-- Clean existing opportunities data
DELETE FROM "opportunities" WHERE "teamId" = 'team-crm-company';

INSERT INTO "opportunities" (
  id,
  name,
  "companyId",
  "contactId",
  "pipelineId",
  "stageId",
  amount,
  currency,
  probability,
  "closeDate",
  "wonDate",
  "lostDate",
  type,
  source,
  competitor,
  status,
  "lostReason",
  "assignedTo",
  "userId",
  "teamId",
  "createdAt",
  "updatedAt"
) VALUES
-- TechnoSoft Solutions Opportunities (company-crm-001)
(
  'opp-crm-001',
  'TechnoSoft CRM Enterprise Implementation',
  'company-crm-001',
  'contact-crm-001',
  'cf7f1f00-0002-4000-8000-000000000002',
  'stage_011',
  125000.00,
  'USD',
  80,
  DATE(NOW() + INTERVAL '45 days'),
  NULL,
  NULL,
  'new_business',
  'referral',
  'Salesforce',
  'open',
  NULL,
  'usr-crm-sales-mgr',
  'usr-crm-ceo',
  'team-crm-company',
  NOW() - INTERVAL '35 days',
  NOW() - INTERVAL '2 days'
),
(
  'opp-crm-002',
  'TechnoSoft Analytics Module Upgrade',
  'company-crm-001',
  'contact-crm-003',
  'cf7f1f00-0001-4000-8000-000000000001',
  'stage_003',
  15000.00,
  'USD',
  50,
  DATE(NOW() + INTERVAL '30 days'),
  NULL,
  NULL,
  'existing_business',
  'existing_customer',
  NULL,
  'open',
  NULL,
  'usr-crm-sales-rep',
  'usr-crm-sales-mgr',
  'team-crm-company',
  NOW() - INTERVAL '20 days',
  NOW() - INTERVAL '3 days'
),

-- Global Manufacturing Corp Opportunities (company-crm-002)
(
  'opp-crm-003',
  'Global Manufacturing Digital Transformation',
  'company-crm-002',
  'contact-crm-004',
  'cf7f1f00-0002-4000-8000-000000000002',
  'stage_009',
  250000.00,
  'USD',
  30,
  DATE(NOW() + INTERVAL '90 days'),
  NULL,
  NULL,
  'new_business',
  'trade_show',
  'HubSpot',
  'open',
  NULL,
  'usr-crm-sales-rep',
  'usr-crm-sales-mgr',
  'team-crm-company',
  NOW() - INTERVAL '60 days',
  NOW() - INTERVAL '5 days'
),
(
  'opp-crm-004',
  'Manufacturing Training & Support Package',
  'company-crm-002',
  'contact-crm-005',
  'cf7f1f00-0001-4000-8000-000000000001',
  'stage_004',
  35000.00,
  'USD',
  75,
  DATE(NOW() + INTERVAL '20 days'),
  NULL,
  NULL,
  'existing_business',
  'existing_customer',
  NULL,
  'open',
  NULL,
  'usr-crm-sales-rep',
  'usr-crm-sales-mgr',
  'team-crm-company',
  NOW() - INTERVAL '25 days',
  NOW() - INTERVAL '1 day'
),

-- Healthcare Innovations Opportunities (company-crm-003)
(
  'opp-crm-005',
  'Healthcare CRM Pro Implementation',
  'company-crm-003',
  'contact-crm-006',
  'cf7f1f00-0001-4000-8000-000000000001',
  'stage_002',
  45000.00,
  'USD',
  25,
  DATE(NOW() + INTERVAL '60 days'),
  NULL,
  NULL,
  'new_business',
  'linkedin',
  'Zoho',
  'open',
  NULL,
  'usr-crm-sales-mgr',
  'usr-crm-ceo',
  'team-crm-company',
  NOW() - INTERVAL '15 days',
  NOW() - INTERVAL '1 day'
),
(
  'opp-crm-006',
  'Healthcare Compliance & Security Audit',
  'company-crm-003',
  'contact-crm-007',
  'cf7f1f00-0001-4000-8000-000000000001',
  'stage_001',
  12000.00,
  'USD',
  10,
  DATE(NOW() + INTERVAL '75 days'),
  NULL,
  NULL,
  'new_business',
  'referral',
  NULL,
  'open',
  NULL,
  'usr-crm-sales-rep',
  'usr-crm-sales-mgr',
  'team-crm-company',
  NOW() - INTERVAL '10 days',
  NOW() - INTERVAL '2 days'
),

-- FinanceFirst Bank Opportunities (company-crm-004)
(
  'opp-crm-007',
  'FinanceFirst Enterprise CRM Platform',
  'company-crm-004',
  'contact-crm-008',
  'cf7f1f00-0002-4000-8000-000000000002',
  'stage_010',
  180000.00,
  'USD',
  60,
  DATE(NOW() + INTERVAL '120 days'),
  NULL,
  NULL,
  'existing_business',
  'existing_customer',
  'Microsoft Dynamics',
  'open',
  NULL,
  'usr-crm-sales-rep',
  'usr-crm-sales-mgr',
  'team-crm-company',
  NOW() - INTERVAL '90 days',
  NOW() - INTERVAL '10 days'
),

-- EduTech Academy Opportunities (company-crm-005)
(
  'opp-crm-008',
  'EduTech CRM Pro License & Training',
  'company-crm-005',
  'contact-crm-010',
  'cf7f1f00-0001-4000-8000-000000000001',
  'stage_003',
  28000.00,
  'USD',
  50,
  DATE(NOW() + INTERVAL '35 days'),
  NULL,
  NULL,
  'new_business',
  'webinar',
  NULL,
  'open',
  NULL,
  'usr-crm-sales-rep',
  'usr-crm-sales-mgr',
  'team-crm-company',
  NOW() - INTERVAL '12 days',
  NOW() - INTERVAL '1 day'
),

-- RetailMax Chain Opportunities (company-crm-006)
(
  'opp-crm-009',
  'RetailMax Multi-Store CRM Solution',
  'company-crm-006',
  'contact-crm-012',
  'cf7f1f00-0002-4000-8000-000000000002',
  'stage_008',
  95000.00,
  'USD',
  15,
  DATE(NOW() + INTERVAL '150 days'),
  NULL,
  NULL,
  'new_business',
  'partner_referral',
  'Pipedrive',
  'open',
  NULL,
  'usr-crm-sales-mgr',
  'usr-crm-ceo',
  'team-crm-company',
  NOW() - INTERVAL '45 days',
  NOW() - INTERVAL '7 days'
),

-- StartupTech Inc Opportunities (company-crm-007)
(
  'opp-crm-010',
  'StartupTech Growth Package',
  'company-crm-007',
  'contact-crm-014',
  'cf7f1f00-0003-4000-8000-000000000003',
  'stage_017',
  8500.00,
  'USD',
  60,
  DATE(NOW() + INTERVAL '25 days'),
  NULL,
  NULL,
  'new_business',
  'inbound_marketing',
  NULL,
  'open',
  NULL,
  'usr-crm-sales-rep',
  'usr-crm-sales-rep',
  'team-crm-company',
  NOW() - INTERVAL '8 days',
  NOW() - INTERVAL '1 day'
),
(
  'opp-crm-011',
  'StartupTech Implementation Services',
  'company-crm-007',
  'contact-crm-015',
  'cf7f1f00-0001-4000-8000-000000000001',
  'stage_002',
  15000.00,
  'USD',
  25,
  DATE(NOW() + INTERVAL '40 days'),
  NULL,
  NULL,
  'new_business',
  'referral',
  NULL,
  'open',
  NULL,
  'usr-crm-sales-rep',
  'usr-crm-sales-rep',
  'team-crm-company',
  NOW() - INTERVAL '5 days',
  NOW() - INTERVAL '1 day'
),

-- Local Consulting Group Opportunities (company-crm-008)
(
  'opp-crm-012',
  'Local Consulting CRM Setup',
  'company-crm-008',
  'contact-crm-016',
  'cf7f1f00-0003-4000-8000-000000000003',
  'stage_015',
  6500.00,
  'USD',
  15,
  DATE(NOW() + INTERVAL '50 days'),
  NULL,
  NULL,
  'new_business',
  'cold_outreach',
  NULL,
  'open',
  NULL,
  'usr-crm-sales-rep',
  'usr-crm-sales-mgr',
  'team-crm-company',
  NOW() - INTERVAL '20 days',
  NOW() - INTERVAL '5 days'
),

-- Closed Won Opportunities (Historical Data)
(
  'opp-crm-013',
  'TechnoSoft Initial CRM License',
  'company-crm-001',
  'contact-crm-001',
  'cf7f1f00-0001-4000-8000-000000000001',
  'stage_005',
  18000.00,
  'USD',
  100,
  DATE(NOW() - INTERVAL '30 days'),
  DATE(NOW() - INTERVAL '30 days'),
  NULL,
  'new_business',
  'referral',
  NULL,
  'won',
  NULL,
  'usr-crm-sales-mgr',
  'usr-crm-ceo',
  'team-crm-company',
  NOW() - INTERVAL '75 days',
  NOW() - INTERVAL '30 days'
),
(
  'opp-crm-014',
  'Global Manufacturing Server Package',
  'company-crm-002',
  'contact-crm-004',
  'cf7f1f00-0001-4000-8000-000000000001',
  'stage_005',
  42000.00,
  'USD',
  100,
  DATE(NOW() - INTERVAL '15 days'),
  DATE(NOW() - INTERVAL '15 days'),
  NULL,
  'new_business',
  'existing_customer',
  NULL,
  'won',
  NULL,
  'usr-crm-sales-rep',
  'usr-crm-sales-mgr',
  'team-crm-company',
  NOW() - INTERVAL '60 days',
  NOW() - INTERVAL '15 days'
),

-- Closed Lost Opportunities (Learning Data)
(
  'opp-crm-015',
  'Healthcare Budget Constraints Deal',
  'company-crm-003',
  'contact-crm-006',
  'cf7f1f00-0001-4000-8000-000000000001',
  'stage_006',
  65000.00,
  'USD',
  0,
  DATE(NOW() - INTERVAL '10 days'),
  NULL,
  DATE(NOW() - INTERVAL '10 days'),
  'new_business',
  'trade_show',
  'Salesforce',
  'lost',
  'Budget constraints due to Q4 freezing',
  'usr-crm-sales-mgr',
  'usr-crm-ceo',
  'team-crm-company',
  NOW() - INTERVAL '90 days',
  NOW() - INTERVAL '10 days'
),
(
  'opp-crm-016',
  'StartupTech Timing Issues',
  'company-crm-007',
  'contact-crm-014',
  'cf7f1f00-0003-4000-8000-000000000003',
  'stage_019',
  12000.00,
  'USD',
  0,
  DATE(NOW() - INTERVAL '5 days'),
  NULL,
  DATE(NOW() - INTERVAL '5 days'),
  'new_business',
  'website',
  NULL,
  'lost',
  'Not the right timing - revisit in 6 months',
  'usr-crm-sales-rep',
  'usr-crm-sales-rep',
  'team-crm-company',
  NOW() - INTERVAL '45 days',
  NOW() - INTERVAL '5 days'
);
